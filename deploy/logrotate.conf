# Logrotate configuration for XPPM DSS
# Install: sudo cp deploy/logrotate.conf /etc/logrotate.d/xppm-dss

# Rotate decision logs (JSONL)
/path/to/artifacts/deploy/v1/decisions.jsonl {
    daily
    rotate 14
    compress
    delaycompress
    missingok
    notifempty
    copytruncate
    create 0644 ubuntu ubuntu
    postrotate
        # Optional: notify systemd service if needed
        # systemctl reload xppm-dss > /dev/null 2>&1 || true
    endscript
}

# Rotate feedback logs (JSONL)
/path/to/artifacts/deploy/v1/feedback.jsonl {
    daily
    rotate 30
    compress
    delaycompress
    missingok
    notifempty
    copytruncate
    create 0644 ubuntu ubuntu
}

# Rotate monitoring cron logs
/path/to/logs/monitoring_cron.log {
    weekly
    rotate 8
    compress
    delaycompress
    missingok
    notifempty
    create 0644 ubuntu ubuntu
}

# Rotate feedback consolidation logs
/path/to/logs/feedback_consolidation.log {
    weekly
    rotate 12
    compress
    delaycompress
    missingok
    notifempty
    create 0644 ubuntu ubuntu
}
